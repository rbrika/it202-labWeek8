<!DOCTYPE html>
<html>
    

<head>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        #{
            display: none;
        }
    </style>
</head>
    <body>
        
        <ul id="list-group" style="width: auto">
          <li id="item" class="tempItem list-group-item d-flex justify-content-between align-items-center">
            Cras justo odio
            <span id="count" class="badge badge-primary badge-pill">14</span>
            </li>
           </ul>
            <script >
            $(document).ready(function(){
                var url='https://data.cityofchicago.org/resource/xzkq-xp2w.json?';
            $.get(url+'$select=department,count(department)&$group=department',function(response){
                console.log(response);
                $.each(response, function(i,v){
                    var clone= $(".tempItem").clone();
                      clone.text(v.department);      
                    var span = $("<span>").addClass("badge badge-primary badge-pill").text(v.count_department);
                    clone.append(span);
                    clone.attr("data-dept",v.department);
                    clone.attr("id","");
                    clone.removeClass("tempItem");
                    $("#list-group").append(clone);
                });
            });
                $("body").on("click",".list-group-item",function(){
                    $.get(url+'&department='+encodeURIComponent($(this).attr("data-dept")),function(data){
                        console.log(data);
                    });
                });
               
                
            });
        </script>
    </body>
    </html>